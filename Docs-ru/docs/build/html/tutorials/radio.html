<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Radio &mdash; документация Microbit-Русская документация 0.1</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="../genindex.html" />
    <link rel="search" title="Поиск" href="../search.html" />
    <link rel="next" title="Next Steps" href="next.html" />
    <link rel="prev" title="Речь" href="speech.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >
            <a href="../index.html" class="icon icon-home"> Microbit-Русская документация
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Меню навигации">
              <p class="caption" role="heading"><span class="caption-text">Основные команды</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Инструкция</a></li>
<li class="toctree-l1"><a class="reference internal" href="hello.html">Первая программа Hello, World!</a></li>
<li class="toctree-l1"><a class="reference internal" href="images.html">Изображения</a></li>
<li class="toctree-l1"><a class="reference internal" href="buttons.html">Кнопки</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">Контакты/Пины</a></li>
<li class="toctree-l1"><a class="reference internal" href="music.html">Мелодии</a></li>
<li class="toctree-l1"><a class="reference internal" href="random.html">Случайные числа</a></li>
<li class="toctree-l1"><a class="reference internal" href="movement.html">Акселерометр</a></li>
<li class="toctree-l1"><a class="reference internal" href="gestures.html">Жесты - Акселерометр</a></li>
<li class="toctree-l1"><a class="reference internal" href="direction.html">Компас</a></li>
<li class="toctree-l1"><a class="reference internal" href="speech.html">Речь</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Radio</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#layers-upon-layers">Layers upon Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bytes">Bytes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#addressing">Addressing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fireflies">Fireflies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="next.html">Next Steps</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Меню навигации для мобильных устройств"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Microbit-Русская документация</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Навигация по страницам">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Radio</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/radio.rst.txt" rel="nofollow"> Просмотреть исходный код страницы</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="radio">
<h1>Radio<a class="headerlink" href="#radio" title="Ссылка на этот заголовок"></a></h1>
<p>Interaction at a distance feels like magic.</p>
<p>Magic might be useful if you’re an elf, wizard or unicorn, but such things only
exist in stories.</p>
<p>However, there’s something much better than magic: physics!</p>
<p>Wireless interaction is all about physics: radio waves (a type of
electromagnetic radiation, similar to visible light) have some sort of property
(such as their amplitude, phase or pulse width) modulated by a transmitter in
such a way that information can be encoded and, thus, broadcast. When radio
waves encounter an electrical conductor (i.e. an aerial), they cause an
alternating current from which the information in the waves can be extracted
and transformed back into its original form.</p>
<section id="layers-upon-layers">
<h2>Layers upon Layers<a class="headerlink" href="#layers-upon-layers" title="Ссылка на этот заголовок"></a></h2>
<p>If you remember, networks are built in layers.</p>
<p>The most fundamental requirement for a network is some sort of connection that
allows a signal to get from one device to the other. In our networking
tutorial we used wires connected to the I/O pins. Thanks to the radio module we
can do away with wires and use the physics summarised above as the invisible
connection between devices.</p>
<p>The next layer up in the network stack is also different from the example in
the networking tutorial. With the wired example we used digital on and off to
send and read a signal from the pins. With the built-in radio on the
micro:bit the smallest useful part of the signal is a byte.</p>
</section>
<section id="bytes">
<h2>Bytes<a class="headerlink" href="#bytes" title="Ссылка на этот заголовок"></a></h2>
<p>A byte is a unit of information that (usually) consists of eight bits. A bit is
the smallest possible unit of information since it can only be in two states:
on or off.</p>
<p>Bytes work like a sort of abacus: each position in the byte is like a
column in an abacus - they represent an associated number. In an abacus these
are usually thousands, hundreds, tens and units (in UK parlance). In a byte
they are 128, 64, 32, 16, 8, 4, 2 and 1. As bits (on/off
signals) are sent over the air, they are re-combined into bytes by the
recipient.</p>
<p>Have you spotted the pattern? (Hint: base 2.)</p>
<p>By adding the numbers associated with the positions in a byte that are set to
«on» we can represent numbers between 0 and 255. The image below shows how this
works with five bits and counting from zero to 32:</p>
<img alt="../_images/binary_count.gif" src="../_images/binary_count.gif" />
<p>If we can agree what each one of the 255 numbers (encoded by a byte) represents ~ such as a character ~ then we can start to send text one character per byte
at a time.</p>
<p>Funnily enough, people have already
<a class="reference external" href="https://en.wikipedia.org/wiki/ASCII">thought of this</a> ~ using bytes to
encode and decode information is commonplace. This approximately corresponds to
the Morse-code «protocol» layer in the wired networking example.</p>
<p>A really great series of child (and teacher) friendly explanations of «all
things bytes» can be found at the
<a class="reference external" href="http://csunplugged.org/binary-numbers/">CS unplugged</a> website.</p>
</section>
<section id="addressing">
<h2>Addressing<a class="headerlink" href="#addressing" title="Ссылка на этот заголовок"></a></h2>
<p>The problem with radio is that you can’t transmit directly to one person.
Anyone with an appropriate aerial can receive the messages you transmit. As a
result it’s important to be able to differentiate who should be receiving
broadcasts.</p>
<p>The way the radio built into the micro:bit solves this problem is quite simple:</p>
<ul class="simple">
<li><p>It’s possible to tune the radio to different channels (numbered 0-83). This works in exactly the same way as kids“ walkie-talkie radios: everyone tunes into the same channel and everyone hears what everyone else broadcasts via that channel. As with walkie-talkies, if you use adjacent channels there is a slight possibility of interference.</p></li>
<li><p>The radio module allows you to specify two pieces of information: an address and a group. The address is like a postal address whereas a group is like a specific recipient at the address. The important thing is the radio will filter out messages that it receives that do not match <em>your</em> address and group. As a result, it’s important to pre-arrange the address and group your application is going to use.</p></li>
</ul>
<p>Of course, the micro:bit is still receiving broadcast messages for other
address/group combinations. The important thing is you don’t need to worry
about filtering those out. Nevertheless, if someone were clever enough, they
could just read <em>all the wireless network traffic</em> no matter what the target
address/group was supposed to be. In this case, it’s <em>essential</em> to use
encrypted means of communication so only the desired recipient can actually
read the message that was broadcast. Cryptography is a fascinating subject but,
unfortunately, beyond the scope of this tutorial.</p>
</section>
<section id="fireflies">
<h2>Fireflies<a class="headerlink" href="#fireflies" title="Ссылка на этот заголовок"></a></h2>
<p>This is a firefly:</p>
<img alt="../_images/firefly.gif" src="../_images/firefly.gif" />
<p>It’s a sort of bug that uses bioluminescence to signal (without wires) to its
friends. Here’s what they look like when they signal to each other:</p>
<img alt="../_images/fireflies.gif" src="../_images/fireflies.gif" />
<p>The BBC have <a class="reference external" href="http://www.bbc.com/earth/story/20160224-worlds-largest-gathering-of-synchronised-fireflies">rather a beautiful video</a> of fireflies available online.</p>
<p>We’re going to use the radio module to create something akin to a swarm of
fireflies signalling to each other.</p>
<p>First <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">radio</span></code> to make the functions available to your Python program.
Then call the <code class="docutils literal notranslate"><span class="pre">radio.on()</span></code> function to turn the radio on. Since
the radio draws power and takes up memory we’ve made it so <em>you</em> decide
when it is enabled (there is, of course a <code class="docutils literal notranslate"><span class="pre">radio.off()</span></code> function).</p>
<p>At this point the radio module is configured to sensible defaults that make
it compatible with other platforms that may target the BBC micro:bit. It is
possible to control many of the features discussed above (such as channel and
addressing) as well as the amount of power used to broadcast messages and the
amount of RAM the incoming message queue will take up. The API documentation
contains all the information you need to configure the radio to your needs.</p>
<p>Assuming we’re happy with the defaults, the simplest way to send a message is
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">radio</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;a message&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The example uses the <code class="docutils literal notranslate"><span class="pre">send</span></code> function to simply broadcast the string
«a message». To receive a message is even easier:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">new_message</span> <span class="o">=</span> <span class="n">radio</span><span class="o">.</span><span class="n">receive</span><span class="p">()</span>
</pre></div>
</div>
<p>As messages are received they are put on a message queue. The <code class="docutils literal notranslate"><span class="pre">receive</span></code>
function returns the oldest message from the queue as a string, making space
for a new incoming message. If the message queue fills up, then new incoming
messages are ignored.</p>
<p>That’s really all there is to it! (Although the radio module is also powerful
enough that you can send any arbitrary type of data, not just strings. See the
API documentation for how this works.)</p>
<p>Armed with this knowledge, it’s simple to make micro:bit fireflies like this:</p>
<p>The important stuff happens in the event loop. First, it checks if button A was
pressed and, if it was, uses the radio to send the message «flash». Then it
reads any messages from the message queue with <code class="docutils literal notranslate"><span class="pre">radio.receive()</span></code>. If there is
a message it sleeps a short, random period of time (to make the display more
interesting) and uses <code class="docutils literal notranslate"><span class="pre">display.show()</span></code> to animate a firefly flash. Finally,
to make things a bit exciting, it chooses a random number so that it has a 1 in
10 chance of re-broadcasting the «flash» message to anyone else (this is how
it’s possible to sustain the firefly display among several devices). If it
decides to re-broadcast then it waits for half a second (so the display from
the initial flash message has chance to die down) before sending
the «flash» signal again. Because this code is enclosed within a <code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">True</span></code>
block, it loops back to the beginning of the event loop and repeats this
process forever.</p>
<p>The end result (using a group of micro:bits) should look something like this:</p>
<img alt="../_images/mb-firefly.gif" src="../_images/mb-firefly.gif" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Нижняя область">
        <a href="speech.html" class="btn btn-neutral float-left" title="Речь" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="next.html" class="btn btn-neutral float-right" title="Next Steps" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Maxim Bekurin, Read the Docs, Inc. &amp; contributors.</p>
  </div>

  Собрано при помощи <a href="https://www.sphinx-doc.org/">Sphinx</a> с использованием
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">темы,</a>
    предоставленной <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XXXXXXXXXX', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>